
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tic Tac Toe</title>
  <style>
    #board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 5px;
      width: max-content;
      margin: 20px auto;
    }
    .cell {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      background-color: #f0f0f0;
      cursor: pointer;
      border: 1px solid #ccc;
      user-select: none;
    }
  </style>
</head>
<body>

<h2 style="text-align:center">Tic Tac Toe</h2>
<div id="board"></div>

<script>
  const boardElement = document.getElementById('board');
  let board = Array(9).fill(0);
  let currentPlayer = -1; // -1 for X, 1 for O

  function renderBoard() {
    boardElement.innerHTML = '';
    board.forEach((cell, index) => {
      const cellDiv = document.createElement('div');
      cellDiv.className = 'cell';
      cellDiv.textContent = cell === -1 ? 'X' : cell === 1 ? 'O' : '';
      cellDiv.addEventListener('click', () => handleClick(index));
      boardElement.appendChild(cellDiv);
    });
  }

  function handleClick(index) {
    if (board[index] !== 0) return; // Ignore if already filled

    board[index] = currentPlayer;
    sendMove();
    currentPlayer *= -1; // Switch player
    renderBoard();
  }

  function sendMove() {
    fetch('/game/nextmove', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(board)
    }).then(response => {
      if (!response.ok) {
        console.error('Server error');
      }
      // Handle server response if needed
    }).catch(error => {
      console.error('Request failed', error);
    });
  }

  renderBoard();
</script>

</body>
</html>
